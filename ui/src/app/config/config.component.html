
<form class="config-container" #heroForm="ngForm">

  <div class="config-section">
    <mat-form-field appearance="fill">
      <mat-label>Select an option</mat-label>
      <mat-select [(ngModel)]="deviceOnDisplay.id" (selectionChange)="handleDifferentDevice(deviceOnDisplay.id)"  name="device">
        <mat-option value="None" disabled>None</mat-option>
        <mat-option *ngFor="let dev of devices" [value]="dev.id">{{dev.friendly_name || dev.details.name || dev.id}}</mat-option>
      </mat-select>
    </mat-form-field>
  
  
    <div class="config-icons-container">
      <div class="config-icons">
        <button mat-icon-button color="primary" (click)="fetchDevices()" class="config-icon-refresh" aria-label="Refresh Button's Icon">
          <mat-icon>refresh</mat-icon>
        </button>
        <button mat-icon-button color="primary" (click)="handleNewDevice()" class="config-icon-add" aria-label="Example icon button with a home icon">
          <mat-icon>add</mat-icon>
        </button>
      </div>
    </div>
    <!-- <mat-divider></mat-divider> -->
  </div>



  
  <div class="config-section">


    <mat-form-field class="config-field">
      <mat-label>Friendly Name</mat-label>
      <input matInput  placeholder="Friendly Name for Remote Device" [(ngModel)]="deviceOnDisplay.friendly_name" [disabled]="isCreatingDevice" name="friendlyName">
    </mat-form-field>
    <mat-form-field class="config-field">
      <mat-label>IP Address</mat-label>
      <input matInput type="text" placeholder="Remote Device IP" [(ngModel)]="deviceOnDisplay.configuration.ip"  name="ipAddress" required pattern="^([0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3})$">
    </mat-form-field>
    <mat-form-field class="config-field">
      <mat-label>Port</mat-label>
      <input matInput type="number" placeholder="Remote Device Port" [(ngModel)]="deviceOnDisplay.configuration.port" required  name="port" min="1">
    </mat-form-field> 
  
    <!-- <mat-divider class="config-divider"></mat-divider> -->
  </div>


  <div class="config-section">
    <mat-chip-list aria-label="Fish selection">
      <app-role *ngFor="let role of roles" [role]="role" [isSelected]="deviceOnDisplay.roles.indexOf(role) != -1" (isSelectedChange)="handleRoleUpdate(role, $event)"></app-role>
    </mat-chip-list>    
  </div>



  <div class="config-section">
    <mat-form-field appearance="fill">
      <mat-label>Select a Class of Devices</mat-label>
      <mat-select [(value)]="deviceOnDisplay.configuration.class" [disabled]="!isCreatingDevice" required  name="deviceClass"
                  (selectionChange)="handleDifferentClass(deviceOnDisplay.configuration.class)">
        <mat-option value="None" disabled>None</mat-option>
        <mat-option *ngFor="let cls of classes" [value]="cls">{{cls|toUpper}}</mat-option>
      </mat-select>
    </mat-form-field>


    <mat-form-field appearance="fill">
      <mat-label>Select a Family of Device</mat-label>
      <mat-select [(value)]="deviceOnDisplay.configuration.family" [disabled]="!isCreatingDevice" required  name="deviceFamily"
                  (selectionChange)="handleDifferentFamily(deviceOnDisplay.configuration.family)">
        <mat-option value="None" disabled>None</mat-option>
        <mat-option *ngFor="let fam of families" [value]="fam">{{fam|toUpper}}</mat-option>
      </mat-select>
    </mat-form-field> 
  
    <!-- <mat-divider class="config-divider"></mat-divider> -->
  </div>




  <div class="config-section">
    <button class="config-action" (click)="handleCreation()" *ngIf="isCreatingDevice" mat-raised-button color="primary" [disabled]="heroForm.invalid">Register New Device</button>
    <button class="config-action" (click)="handleUpdate()" *ngIf="!isCreatingDevice" mat-raised-button color="primary" [disabled]="!deviceOnDisplay.id">Update</button>
    <button class="config-action" (click)="handleDelete()" *ngIf="!isCreatingDevice" mat-raised-button color="warn" [disabled]="!deviceOnDisplay.id">Delete</button>  
  </div>


  <!-- <app-input-field-text class="app-input-field"></app-input-field-text>
  <app-input-field-text class="app-input-field"></app-input-field-text>
  <app-input-field-text class="app-input-field"></app-input-field-text>
  <app-input-field-text class="app-input-field"></app-input-field-text> -->
</form>